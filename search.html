<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - My Store</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
</head>
<body>

<header>
    <h1>Search Results</h1>
    <nav>
        <form id="search-form" action="search.html" method="get">
            <div class="search-wrapper">
                <img class="search-icon" src="products/images/magnifying-glass-9-svgrepo-com.svg" alt="Search">
                <input type="text" name="q" placeholder="Search" required>
            </div>
        </form>

        <button class="menu-toggle" onclick="toggleMenu()">☰</button>
        
        <a href="./index.html">Home</a>
        <a href="./cart.html" id="cart-link">
            <img id="cart-icon" src="products/images/shopping-cart-free-5-svgrepo-com.svg" alt="Cart">
            Cart <span id="cart-count">0</span>
        </a>
    </nav>
</header>

<div class="shop-layout">

    <div class="left-links">
        <a href="new.html">New</a>
        <a href="tshirts.html">T-Shirts</a>
        <a href="pants.html">Pants</a>
        <a href="shorts.html">Shorts</a>
        <a href="index.html">Home</a>
        <a href="tos.html">Terms of Service</a>
    </div>

    <div class="container" id="search-results">
        <!-- JS will populate matching products here -->
    </div>
</div>

<script>
    const products = [
        { name: "Death Mask", price: 30.00, images: ["products/images/FINISH10.png", "products/images/FINISH-BlankWhiteBack.png"], link: "products/product1.html" },
        { name: "314", price: 30.00, images: [ "products/images/FINISH11.png", "products/images/FINISH-BlankBlackBack.png"], link: "products/product2.html" },
        { name: "CASH-White", price: 30.00, images: [ "products/images/FINISH5.png", "products/images/FINISH-BlankWhiteBack.png"], link: "products/product3.html" },
        { name: "CASH-Black", price: 30.00, images: [ "products/images/FINISH6.png", "products/images/FINISH6-2.png"], link: "products/product4.html" },
        { name: "One Pound", price: 30.00, images: [ "products/images/FINISH1.png", "products/images/FINISH1-2.png"], link: "products/product5.html" },
        { name: "Club", price: 30.00, images: [ "products/images/FINISH2.png", "products/images/FINISH-BlankWhiteBack.png"], link: "products/product6.html" },
        { name: "Chanel", price: 30.00, images: [ "products/images/FINISH3.png", "products/images/FINISH-BlankWhiteBack.png"], link: "products/product7.html" },
        { name: "One Pound - 2", price: 30.00, images: [ "products/images/FINISH4.png", "products/images/FINISH-BlankBlackBack.png"], link: "products/product8.html" },
        { name: "Satellite", price: 30.00, images: [ "products/images/FINISH8.png", "products/images/FINISH-BlankBlackBack.png"], link: "products/product9.html" },
        { name: "Death Mask - 2", price: 30.00, images: [ "products/images/FINISH9.png", "products/images/FINISH-BlankWhiteBack.png"], link: "products/product10.html" },
    ];

    // Get search query from URL
    const params = new URLSearchParams(window.location.search);
    const query = params.get("q")?.toLowerCase() || "";

    const resultsContainer = document.getElementById("search-results");

    // Filter products
    const matches = products.filter(p => p.name.toLowerCase().includes(query));

    if (matches.length === 0) {
        resultsContainer.innerHTML = "<p>No products found.</p>";
    } else {
        matches.forEach(p => {
            const div = document.createElement("div");
            div.className = "product";
            div.setAttribute("data-name", p.name);
            div.setAttribute("data-price", p.price.toFixed(2));
            div.setAttribute("data-image", p.image);
            div.setAttribute("data-category", "tshirt"); // or dynamic if you have category

            div.innerHTML = `
                <a href="${p.link}">
                    <img src="${p.images[0]}" alt="${p.name}" width="200">
                    <img class="hover-img" src="${p.images[1] || p.images[0]}" alt="${p.name} Hover">
                    <h3>${p.name}</h3>
                </a>
                <p>€${p.price.toFixed(2)}</p>
            `;
            resultsContainer.appendChild(div);
        });
    }
</script>
</body>
</html>
